import{c as D,r as o,j as e,d as N,e as fe,B as R}from"./index-f706ea62.js";import{u as xe,D as q,a as L,b as I,c as O,d as H,L as j,I as x,S as je,e as ge,f as ve,g as be,h as ye,i as W}from"./label-d19bfa4c.js";import{S as F,a as U}from"./sweetalert2.esm.all-eb15c717.js";import"./index-311236a7.js";import"./x-17a84d84.js";const Q=D("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Y=D("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),we=D("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),G=o.forwardRef(({className:t,...a},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:N("w-full caption-bottom text-sm",t),...a})}));G.displayName="Table";const V=o.forwardRef(({className:t,...a},r)=>e.jsx("thead",{ref:r,className:N("[&_tr]:border-b",t),...a}));V.displayName="TableHeader";const X=o.forwardRef(({className:t,...a},r)=>e.jsx("tbody",{ref:r,className:N("[&_tr:last-child]:border-0",t),...a}));X.displayName="TableBody";const Ne=o.forwardRef(({className:t,...a},r)=>e.jsx("tfoot",{ref:r,className:N("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a}));Ne.displayName="TableFooter";const B=o.forwardRef(({className:t,...a},r)=>e.jsx("tr",{ref:r,className:N("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a}));B.displayName="TableRow";const E=o.forwardRef(({className:t,...a},r)=>e.jsx("th",{ref:r,className:N("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a}));E.displayName="TableHead";const k=o.forwardRef(({className:t,...a},r)=>e.jsx("td",{ref:r,className:N("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a}));k.displayName="TableCell";const Ce=o.forwardRef(({className:t,...a},r)=>e.jsx("caption",{ref:r,className:N("mt-4 text-sm text-muted-foreground",t),...a}));Ce.displayName="TableCaption";function Se(t,a,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return a==null?void 0:a(i)}}function Z(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function _e(...t){return a=>{let r=!1;const c=t.map(i=>{const d=Z(i,a);return!r&&typeof d=="function"&&(r=!0),d});if(r)return()=>{for(let i=0;i<c.length;i++){const d=c[i];typeof d=="function"?d():Z(t[i],null)}}}}function ke(...t){return o.useCallback(_e(...t),t)}function Pe(t,a=[]){let r=[];function c(d,n){const l=o.createContext(n),h=r.length;r=[...r,n];const m=g=>{var v;const{scope:f,children:P,..._}=g,w=((v=f==null?void 0:f[t])==null?void 0:v[h])||l,T=o.useMemo(()=>_,Object.values(_));return e.jsx(w.Provider,{value:T,children:P})};m.displayName=d+"Provider";function y(g,f){var w;const P=((w=f==null?void 0:f[t])==null?void 0:w[h])||l,_=o.useContext(P);if(_)return _;if(n!==void 0)return n;throw new Error(`\`${g}\` must be used within \`${d}\``)}return[m,y]}const i=()=>{const d=r.map(n=>o.createContext(n));return function(l){const h=(l==null?void 0:l[t])||d;return o.useMemo(()=>({[`__scope${t}`]:{...l,[t]:h}}),[l,h])}};return i.scopeName=t,[c,Ee(i,...a)]}function Ee(...t){const a=t[0];if(t.length===1)return a;const r=()=>{const c=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(d){const n=c.reduce((l,{useScope:h,scopeName:m})=>{const g=h(d)[`__scope${m}`];return{...l,...g}},{});return o.useMemo(()=>({[`__scope${a.scopeName}`]:n}),[n])}};return r.scopeName=a.scopeName,r}function J(t){const a=o.useRef(t);return o.useEffect(()=>{a.current=t}),o.useMemo(()=>(...r)=>{var c;return(c=a.current)==null?void 0:c.call(a,...r)},[])}function Te({prop:t,defaultProp:a,onChange:r=()=>{}}){const[c,i]=Re({defaultProp:a,onChange:r}),d=t!==void 0,n=d?t:c,l=J(r),h=o.useCallback(m=>{if(d){const g=typeof m=="function"?m(t):m;g!==t&&l(g)}else i(m)},[d,t,i,l]);return[n,h]}function Re({defaultProp:t,onChange:a}){const r=o.useState(t),[c]=r,i=o.useRef(c),d=J(a);return o.useEffect(()=>{i.current!==c&&(d(c),i.current=c)},[c,i,d]),r}var Fe=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{};function Ae(t){const[a,r]=o.useState(void 0);return Fe(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const c=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const d=i[0];let n,l;if("borderBoxSize"in d){const h=d.borderBoxSize,m=Array.isArray(h)?h[0]:h;n=m.inlineSize,l=m.blockSize}else n=t.offsetWidth,l=t.offsetHeight;r({width:n,height:l})});return c.observe(t,{box:"border-box"}),()=>c.unobserve(t)}else r(void 0)},[t]),a}var Be=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],K=Be.reduce((t,a)=>{const r=fe(`Primitive.${a}`),c=o.forwardRef((i,d)=>{const{asChild:n,...l}=i,h=n?r:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...l,ref:d})});return c.displayName=`Primitive.${a}`,{...t,[a]:c}},{}),M="Switch",[$e,We]=Pe(M),[ze,Ue]=$e(M),ee=o.forwardRef((t,a)=>{const{__scopeSwitch:r,name:c,checked:i,defaultChecked:d,required:n,disabled:l,value:h="on",onCheckedChange:m,form:y,...g}=t,[f,P]=o.useState(null),_=ke(a,b=>P(b)),w=o.useRef(!1),T=f?y||!!f.closest("form"):!0,[v=!1,u]=Te({prop:i,defaultProp:d,onChange:m});return e.jsxs(ze,{scope:r,checked:v,disabled:l,children:[e.jsx(K.button,{type:"button",role:"switch","aria-checked":v,"aria-required":n,"data-state":ae(v),"data-disabled":l?"":void 0,disabled:l,value:h,...g,ref:_,onClick:Se(t.onClick,b=>{u($=>!$),T&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),T&&e.jsx(De,{control:f,bubbles:!w.current,name:c,value:h,checked:v,required:n,disabled:l,form:y,style:{transform:"translateX(-100%)"}})]})});ee.displayName=M;var te="SwitchThumb",se=o.forwardRef((t,a)=>{const{__scopeSwitch:r,...c}=t,i=Ue(te,r);return e.jsx(K.span,{"data-state":ae(i.checked),"data-disabled":i.disabled?"":void 0,...c,ref:a})});se.displayName=te;var De=t=>{const{control:a,checked:r,bubbles:c=!0,...i}=t,d=o.useRef(null),n=xe(r),l=Ae(a);return o.useEffect(()=>{const h=d.current,m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(n!==r&&g){const f=new Event("click",{bubbles:c});g.call(h,r),h.dispatchEvent(f)}},[n,r,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:d,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ae(t){return t?"checked":"unchecked"}var re=ee,Me=se;const ne=o.forwardRef(({className:t,...a},r)=>e.jsx(re,{className:N("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:r,children:e.jsx(Me,{className:N("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ne.displayName=re.displayName;function A({className:t,...a}){return e.jsx("div",{className:N("animate-pulse rounded-md bg-muted",t),...a})}function Qe(){const[t,a]=o.useState([]),[r,c]=o.useState(""),[i,d]=o.useState("all"),[n,l]=o.useState({email:"",project:"",designation:"",inital:"",first_name:"",last_name:"",password:"",re_password:"",rate:""}),[h,m]=o.useState(""),[y,g]=o.useState(!1),[f,P]=o.useState(!1),[_,w]=o.useState(!0),[T,v]=o.useState(!1),[u,b]=o.useState(null),$=()=>n.password.length<8?(m("Password must be at least 8 characters"),!1):n.password!==n.re_password?(m("Passwords do not match"),!1):(m(""),!0),oe=Array.from(new Set(t.map(s=>s.project||"Not Assigned"))),ie=t.filter(s=>{const C=`${s.first_name} ${s.inital} ${s.last_name}`.toLowerCase().includes(r.toLowerCase()),S=i==="all"||(s.project||"Not Assigned")===i;return C&&S});function le(){w(!0),U.get("users/all",{headers:{Authorization:"Token 8622fe22a3814cbc47e1ec14555fdc8cb529ee79"}}).then(s=>{a(s.data)}).finally(()=>{w(!1)})}function ce(s,p){F.fire({title:"Confirm Status Update",text:`Are you sure you want to ${p?"activate":"deactivate"} this employee?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel"}).then(C=>{C.isConfirmed&&U.put(`users/update/${s}/`,{is_active:p},{headers:{Authorization:"Token 8622fe22a3814cbc47e1ec14555fdc8cb529ee79"}}).then(S=>{F.fire({icon:"success",title:"Status Updated",text:`Employee ${S.data.first_name} ${S.data.last_name} is now ${p?"active":"inactive"}`,showConfirmButton:!1,timer:1500}),a(t.map(z=>z.id===s?{...z,is_active:p}:z))}).catch(S=>{console.error("Error updating status:",S),F.fire({icon:"error",title:"Update Failed",text:"Failed to update employee status. Please try again.",showConfirmButton:!1,timer:1500})})})}function de(s,p){U.put(`users/update/${s}/`,p,{headers:{Authorization:"Token 8622fe22a3814cbc47e1ec14555fdc8cb529ee79"}}).then(C=>{F.fire({icon:"success",title:"Employee Updated",text:`${C.data.first_name} ${C.data.last_name}'s information has been updated`,showConfirmButton:!1,timer:1500}),a(t.map(S=>S.id===s?{...S,...p}:S))}).catch(C=>{console.error("Error updating employee:",C),F.fire({icon:"error",title:"Update Failed",text:"Failed to update employee information. Please try again.",showConfirmButton:!1,timer:1500}),v(!0)})}o.useEffect(()=>{le()},[]);const ue=s=>{const p=t.find(C=>C.id===s);p&&(b(p),v(!0))},he=(s,p)=>{ce(s,p)},me=s=>{s.preventDefault(),$()&&(console.log("New employee:",n),l({email:"",project:"",designation:"",inital:"",first_name:"",last_name:"",password:"",re_password:"",rate:""}),m(""))},pe=()=>e.jsx("div",{className:"space-y-2",children:[...Array(5)].map((s,p)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(A,{className:"h-12 w-[250px]"}),e.jsx(A,{className:"h-12 w-[200px]"}),e.jsx(A,{className:"h-12 w-[200px]"}),e.jsx(A,{className:"h-12 w-[100px]"}),e.jsx(A,{className:"h-12 w-[50px] ml-auto"})]},p))});return e.jsxs("div",{className:"p-6 h-full w-full bg-background",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Employees"}),e.jsxs(q,{children:[e.jsx(L,{asChild:!0,children:e.jsx(R,{children:"Add Employee"})}),e.jsxs(I,{className:"sm:max-w-[425px]",children:[e.jsx(O,{children:e.jsx(H,{children:"Add New Employee"})}),e.jsxs("form",{onSubmit:me,className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(j,{htmlFor:"first_name",children:"First Name"}),e.jsx(x,{id:"first_name",placeholder:"taylor",value:n.first_name,onChange:s=>l({...n,first_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(j,{htmlFor:"last_name",children:"Last Name"}),e.jsx(x,{id:"last_name",placeholder:"swift",value:n.last_name,onChange:s=>l({...n,last_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"inital",children:"Initial"}),e.jsx(x,{id:"inital",placeholder:"M",value:n.inital,onChange:s=>l({...n,inital:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(x,{id:"email",type:"email",placeholder:"taylor.swift@gmail.com",value:n.email,onChange:s=>l({...n,email:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"project",children:"Project"}),e.jsx(x,{id:"project",placeholder:"Project Name",value:n.project,onChange:s=>l({...n,project:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"designation",children:"Designation"}),e.jsx(x,{id:"designation",placeholder:"Site Engineer",value:n.designation,onChange:s=>l({...n,designation:s.target.value})})]}),e.jsxs("div",{className:" grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"password",type:y?"text":"password",placeholder:"••••••••",value:n.password,onChange:s=>{l({...n,password:s.target.value}),m("")},required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:y?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(Y,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"re_password",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"re_password",type:f?"text":"password",placeholder:"••••••••",value:n.re_password,onChange:s=>{l({...n,re_password:s.target.value}),m("")},required:!0}),e.jsx("button",{type:"button",onClick:()=>P(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:f?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(Y,{className:"h-4 w-4"})})]}),h&&e.jsx("p",{className:"text-sm text-destructive",children:h})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"rate",children:"Rate"}),e.jsx(x,{id:"rate",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:n.rate,onChange:s=>l({...n,rate:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(L,{asChild:!0,children:e.jsx(R,{variant:"outline",type:"button",children:"Cancel"})}),e.jsx(R,{type:"submit",children:"Add Employee"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(je,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(x,{placeholder:"Search by name...",value:r,onChange:s=>c(s.target.value),className:"pl-8"})]}),e.jsxs(ge,{value:i,onValueChange:d,children:[e.jsx(ve,{className:"w-[200px]",children:e.jsx(be,{placeholder:"Filter by project"})}),e.jsxs(ye,{children:[e.jsx(W,{value:"all",children:"All Projects"}),oe.map(s=>e.jsx(W,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(G,{children:[e.jsx(V,{children:e.jsxs(B,{children:[e.jsx(E,{children:"Full Name"}),e.jsx(E,{children:"Project"}),e.jsx(E,{children:"Designation"}),e.jsx(E,{children:"Rate"}),e.jsx(E,{children:"Status"}),e.jsx(E,{className:"text-right",children:"Actions"})]})}),e.jsx(X,{children:_?e.jsx(B,{children:e.jsx(k,{colSpan:5,children:e.jsx(pe,{})})}):ie.map(s=>e.jsxs(B,{children:[e.jsx(k,{className:"font-medium",children:`${s.first_name} ${s.inital} ${s.last_name}`}),e.jsx(k,{children:s.project||"Not Assigned"}),e.jsx(k,{children:s.designation||"Not Assigned"}),e.jsx(k,{children:s.rate||"Not Assigned"}),e.jsx(k,{children:e.jsx(ne,{checked:s.is_active,onCheckedChange:p=>he(s.id,p)})}),e.jsx(k,{className:"text-right",children:e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>ue(s.id),children:e.jsx(we,{className:"h-4 w-4"})})})]},s.id))})]})}),e.jsx(q,{open:T,onOpenChange:v,children:e.jsxs(I,{className:"sm:max-w-[425px]",children:[e.jsx(O,{children:e.jsx(H,{children:"Update Employee"})}),u&&e.jsxs("form",{onSubmit:s=>{s.preventDefault(),u&&(v(!1),F.fire({title:"Confirm Update",text:"Are you sure you want to update this employee's information?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel"}).then(p=>{p.isConfirmed?de(u.id,{first_name:u.first_name,last_name:u.last_name,inital:u.inital,project:u.project,designation:u.designation,email:u.email,rate:u.rate}):v(!0)}))},className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(j,{htmlFor:"update_first_name",children:"First Name"}),e.jsx(x,{id:"update_first_name",placeholder:"First Name",value:u.first_name,onChange:s=>b({...u,first_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(j,{htmlFor:"update_last_name",children:"Last Name"}),e.jsx(x,{id:"update_last_name",placeholder:"Last Name",value:u.last_name,onChange:s=>b({...u,last_name:s.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"update_initial",children:"Initial"}),e.jsx(x,{id:"update_initial",placeholder:"M",value:u.inital,onChange:s=>b({...u,inital:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"update_project",children:"Email"}),e.jsx(x,{id:"update_project",placeholder:"Project Name",value:u.email,onChange:s=>b({...u,email:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"update_project",children:"Project"}),e.jsx(x,{id:"update_project",placeholder:"Project Name",value:u.project,onChange:s=>b({...u,project:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"update_designation",children:"Designation"}),e.jsx(x,{id:"update_designation",placeholder:"Designation",value:u.designation,onChange:s=>b({...u,designation:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"update_rate",children:"Rate"}),e.jsx(x,{id:"update_rate",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:u.rate||"",onChange:s=>b({...u,rate:parseFloat(s.target.value)||null})})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(R,{variant:"outline",type:"button",onClick:()=>v(!1),children:"Cancel"}),e.jsx(R,{type:"submit",children:"Update Employee"})]})]})]})})]})}export{Qe as default};
